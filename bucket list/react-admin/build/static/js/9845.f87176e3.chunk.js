"use strict";(self.webpackChunkbucketlist=self.webpackChunkbucketlist||[]).push([[9845],{89535:(e,s,a)=>{a.d(s,{Z:()=>o});var r=a(19860),n=a(48119),t=a(46417);const o=e=>{let{color:s,outline:a,size:o,sx:i,...l}=e;const d=(0,r.Z)(),c=s&&!a&&{color:d.palette.background.paper,bgcolor:"".concat(s,".main")},m=a&&{color:s?"".concat(s,".main"):"primary.main",bgcolor:d.palette.background.paper,border:"2px solid",borderColor:s?"".concat(s,".main"):"primary.main"};let h={};switch(o){case"badge":h={width:d.spacing(3.5),height:d.spacing(3.5)};break;case"xs":h={width:d.spacing(4.25),height:d.spacing(4.25)};break;case"sm":h={width:d.spacing(5),height:d.spacing(5)};break;case"lg":h={width:d.spacing(9),height:d.spacing(9)};break;case"xl":h={width:d.spacing(10.25),height:d.spacing(10.25)};break;case"md":h={width:d.spacing(7.5),height:d.spacing(7.5)};break;default:h={}}return(0,t.jsx)(n.Z,{sx:{...c,...m,...h,...i},...l})}},99845:(e,s,a)=>{a.r(s),a.d(s,{default:()=>W});var r=a(47313),n=a(82294),t=a(65280),o=a(9506),i=a(61113),l=a(9019),d=a(35898),c=a(24193),m=a(24631),h=a(85281),p=a(89535),u=a(33497),g=a(79429),x=a(3463),w=a(66135),j=a(91804),Z=a(5866),v=a(67393),b=a(58467),f=a(46417);const P=()=>{const e=(0,w.I0)(),s=(0,r.useRef)(null),[a,n]=(0,r.useState)(!1),[t,o]=(0,r.useState)(null),[P,y]=(0,r.useState)(""),[C,S]=(0,r.useState)(null),k=(0,b.s0)();(0,r.useEffect)((()=>{const e=localStorage.getItem("adminEmployeeProfile");S(JSON.parse(e))}),[]);const z=x.Ry().shape({firstname:x.Z_().required("First name is required").test("no-multi-spaces",(0,f.jsx)(v.Z,{id:"Multiple consecutive spaces are not allowed, and spaces are not permitted at the beginning"}),(e=>e&&/^[^\s]+(\s[^\s]+)*$/.test(e))).min(2,"First name must be at least 2 characters").max(50,"Last name must be at most 50 characters").matches(/^[a-zA-Z\s]*$/,"First name should only contain letters."),lastname:x.Z_().required("Last name is required").test("no-multi-spaces",(0,f.jsx)(v.Z,{id:"Multiple consecutive spaces are not allowed, and spaces are not permitted at the beginning"}),(e=>e&&/^[^\s]+(\s[^\s]+)*$/.test(e))).min(2,"Last name must be at least 2 characters").max(50,"Last name must be at most 50 characters").matches(/^[a-zA-Z\s]*$/,"Last name should only contain letters."),email:x.Z_().email("Invalid email address").required("Email is required").min(2).max(50),phone:x.Z_().required("Phone is required").matches(/^(?!0+$)([1-9][0-9]{4,14})$/,"Phone number must be 5 to 15 digits, cannot start with 0, and cannot be all 0s")}),B={firstname:(null===C||void 0===C?void 0:C.firstname)||"",lastname:(null===C||void 0===C?void 0:C.lastname)||"",email:(null===C||void 0===C?void 0:C.email)||"",phone:(null===C||void 0===C?void 0:C.phone)||"",image:null},L=(0,g.TA)({enableReinitialize:!0,initialValues:B,onSubmit:async s=>{if(console.log(s),""!==P.trim())y("Please select a valid image file (PNG, JPEG)");else{n(!0);try{const a=new FormData;a.append("id",C._id),a.append("firstname",s.firstname),a.append("lastname",s.lastname),a.append("email",s.email),a.append("phone",s.phone),s.image&&a.append("image",s.image);const r=await e((0,j.Kk)(a));console.log(null===r||void 0===r?void 0:r.success),!0===(null===r||void 0===r?void 0:r.success)?(n(!1),localStorage.setItem("adminClientProfile",JSON.stringify(r.data)),e((0,Z.ss)({open:!0,message:null===r||void 0===r?void 0:r.message,variant:"alert",alert:{color:"success"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}})),k("/employee-management")):(n(!1),e((0,Z.ss)({open:!0,message:null===r||void 0===r?void 0:r.message,variant:"alert",alert:{color:"error"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}})))}catch(a){n(!1),e((0,Z.ss)({message:"Something went wrong.",variant:"error"}))}}},validationSchema:z});return(0,f.jsx)(u.Z,{title:(0,f.jsx)(i.Z,{variant:"h3",children:"Employee Profile"}),children:(0,f.jsx)("form",{onSubmit:L.handleSubmit,id:"validation-forms",children:(0,f.jsxs)(l.ZP,{container:!0,spacing:2,direction:"column",children:[(0,f.jsx)(l.ZP,{item:!0,children:(0,f.jsxs)(d.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,f.jsx)(p.Z,{alt:"Employee Pic",src:t||"".concat("http://52.22.241.165:10037","/").concat(null===C||void 0===C?void 0:C.profile_pic),sx:{height:120,width:120,borderRadius:"8px"}}),(0,f.jsx)("label",{htmlFor:"contained-button-file",children:(0,f.jsx)(c.Z,{variant:"contained",component:"span",color:"secondary",children:"Upload Profile"})}),(0,f.jsx)("input",{accept:"image/png, image/jpeg",id:"contained-button-file",type:"file",onChange:e=>{const s=e.target.files[0];s&&["image/png","image/jpeg"].includes(s.type)?(y(""),o(URL.createObjectURL(s)),L.setFieldValue("image",s)):y("Please select a valid image file (PNG, JPEG)")},style:{display:"none"},ref:s}),P&&(0,f.jsx)(i.Z,{variant:"caption",style:{color:"red"},children:P})]})}),(0,f.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,f.jsx)(m.Z,{id:"firstname",name:"firstname",label:"First Name",value:L.values.firstname,onChange:L.handleChange,onBlur:L.handleBlur,error:L.touched.firstname&&Boolean(L.errors.firstname),helperText:L.touched.firstname&&L.errors.firstname,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{maxLength:50}})}),(0,f.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,f.jsx)(m.Z,{id:"lastname",name:"lastname",label:"Last Name",value:L.values.lastname,onChange:L.handleChange,onBlur:L.handleBlur,error:L.touched.lastname&&Boolean(L.errors.lastname),helperText:L.touched.lastname&&L.errors.lastname,fullWidth:!0,InputLabelProps:{shrink:!0},inputProps:{maxLength:50}})}),(0,f.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,f.jsx)(m.Z,{id:"phone",name:"phone",label:"Phone",value:L.values.phone,onChange:L.handleChange,onBlur:L.handleBlur,error:L.touched.phone&&Boolean(L.errors.phone),helperText:L.touched.phone&&L.errors.phone,fullWidth:!0,InputLabelProps:{shrink:!0}})}),(0,f.jsx)(l.ZP,{item:!0,xs:12,sm:6,children:(0,f.jsx)(m.Z,{id:"email",name:"email",label:"Email",value:L.values.email,onChange:L.handleChange,onBlur:L.handleBlur,error:L.touched.email&&Boolean(L.errors.email),helperText:L.touched.email&&L.errors.email,fullWidth:!0,InputLabelProps:{shrink:!0}})}),(0,f.jsx)(l.ZP,{item:!0,xs:12,children:(0,f.jsx)(d.Z,{direction:"row",justifyContent:"center",children:(0,f.jsx)(c.Z,{disabled:a,variant:"contained",type:"submit",color:"secondary",children:a?(0,f.jsx)(h.Z,{size:20,sx:{mr:1}}):"Update"})})})]})})})};var y=a(19860),C=a(1550),S=a(15103),k=a(49914),z=a(41727),B=a(47131),L=a(15480),I=a(10237),q=a(22611),N=a(12401),_=a(40364),O=a(59673);const F=e=>{let{...s}=e;const a=(0,y.Z)(),[n,t]=((0,b.s0)(),r.useState(!1)),[d,m]=r.useState(!1),[p,w]=r.useState(!1),[j,v]=r.useState(!1),[P,F]=r.useState(null),E=()=>{t(!n)},M=()=>{m(!d)},W=()=>{w(!p)},$=e=>{e.preventDefault()},A=(0,O.I0)();return r.useEffect((()=>{const e=localStorage.getItem("adminEmployeeProfile");F(JSON.parse(e))}),[]),(0,f.jsx)(u.Z,{title:(0,f.jsx)(l.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",spacing:N.dv,children:(0,f.jsx)(l.ZP,{item:!0,children:(0,f.jsx)(i.Z,{variant:"h3",children:"Change Password"})})}),children:(0,f.jsx)(l.ZP,{container:!0,spacing:N.dv,children:(0,f.jsx)(l.ZP,{item:!0,xs:12,md:6,sm:6,children:(0,f.jsx)(g.J9,{initialValues:{oldpassword:"",password:"",confirmPassword:"",submit:null},validationSchema:x.Ry().shape({oldpassword:x.Z_().required("Old Password is required"),password:x.Z_().required("New Password is required").test("password-spaces","New Password must contain at least one lowercase letter, one uppercase letter, one number, and one special character",(e=>e&&/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]+$/.test(e))).test("password-not-same-as-old","New Password must not be the same as the old password",((e,s)=>e!==s.parent.oldpassword)).min(8,"New Password must be at least 8 characters").max(25,"New Password must be at most 25 characters"),confirmPassword:x.Z_().required("Confirm Password is required").test("confirmPassword","Password didn't matched",((e,s)=>s.parent.password===e))}),onSubmit:async e=>{v(!0);try{const s={old_password:e.oldpassword,new_password:e.password,confirm_password:e.confirmPassword,id:P._id},a=await A((0,_.$r)(s));!0===(null===a||void 0===a?void 0:a.success)?(v(!1),A((0,Z.ss)({open:!0,message:null===a||void 0===a?void 0:a.message,variant:"alert",alert:{color:"success"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}}))):(v(!1),A((0,Z.ss)({open:!0,message:null===a||void 0===a?void 0:a.message,variant:"alert",alert:{color:"error"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}})))}catch(s){v(!1),A((0,Z.ss)({open:!0,message:"Something went wrong. Please try again later.",variant:"alert",alert:{color:"error"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}}))}},children:e=>{let{errors:r,handleBlur:t,handleChange:i,handleSubmit:l,touched:m,values:u}=e;return(0,f.jsxs)("form",{noValidate:!0,onSubmit:l,...s,children:[(0,f.jsxs)(C.Z,{fullWidth:!0,error:Boolean(m.oldpassword&&r.oldpassword),sx:{...a.typography.customInput},children:[(0,f.jsx)(S.Z,{htmlFor:"outlined-adornment-password-reset",children:"Old Password"}),(0,f.jsx)(k.Z,{id:"outlined-adornment-password-reset",type:n?"text":"password",value:u.oldpassword,name:"oldpassword",onBlur:t,onChange:i,endAdornment:(0,f.jsx)(z.Z,{position:"end",children:(0,f.jsx)(B.Z,{"aria-label":"toggle password visibility",onClick:E,onMouseDown:$,edge:"end",size:"large",children:n?(0,f.jsx)(I.Z,{}):(0,f.jsx)(q.Z,{})})}),inputProps:{maxLength:25}})]}),m.oldpassword&&r.oldpassword&&(0,f.jsx)(C.Z,{fullWidth:!0,children:(0,f.jsxs)(L.Z,{error:!0,id:"standard-weight-helper-text-confirm-password",children:[" ",r.oldpassword," "]})}),(0,f.jsxs)(C.Z,{fullWidth:!0,error:Boolean(m.password&&r.password),sx:{...a.typography.customInput},children:[(0,f.jsx)(S.Z,{htmlFor:"outlined-adornment-password-reset",children:"New Password"}),(0,f.jsx)(k.Z,{id:"outlined-adornment-password-reset",type:d?"text":"password",value:u.password,name:"password",onBlur:t,onChange:i,endAdornment:(0,f.jsx)(z.Z,{position:"end",children:(0,f.jsx)(B.Z,{"aria-label":"toggle password visibility",onClick:M,onMouseDown:$,edge:"end",size:"large",children:d?(0,f.jsx)(I.Z,{}):(0,f.jsx)(q.Z,{})})}),inputProps:{maxLength:25}})]}),m.password&&r.password&&(0,f.jsx)(C.Z,{fullWidth:!0,children:(0,f.jsx)(L.Z,{error:!0,id:"standard-weight-helper-text-reset",children:r.password})}),(0,f.jsxs)(C.Z,{fullWidth:!0,error:Boolean(m.confirmPassword&&r.confirmPassword),sx:{...a.typography.customInput},children:[(0,f.jsx)(S.Z,{htmlFor:"outlined-adornment-password-reset",children:"Confirm Password"}),(0,f.jsx)(k.Z,{id:"outlined-adornment-password-reset",type:p?"text":"password",value:u.confirmPassword,name:"confirmPassword",onBlur:t,onChange:i,endAdornment:(0,f.jsx)(z.Z,{position:"end",children:(0,f.jsx)(B.Z,{"aria-label":"toggle password visibility",onClick:W,onMouseDown:$,edge:"end",size:"large",children:p?(0,f.jsx)(I.Z,{}):(0,f.jsx)(q.Z,{})})}),inputProps:{maxLength:25}})]}),m.confirmPassword&&r.confirmPassword&&(0,f.jsx)(C.Z,{fullWidth:!0,children:(0,f.jsxs)(L.Z,{error:!0,id:"standard-weight-helper-text-confirm-password",children:[" ",r.confirmPassword," "]})}),(0,f.jsx)(o.Z,{sx:{mt:2,textAlign:"center",display:"flex",justifyContent:"center"},children:(0,f.jsx)(c.Z,{variant:"contained",sx:{my:3,ml:1},type:"submit",disabled:j,color:"secondary",children:j?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(h.Z,{color:"success"}),"\xa0 Loading ..."]}):"Change Password"})})]})}})})})})};function E(e){const{children:s,value:a,index:r,...n}=e;return(0,f.jsx)("div",{role:"tabpanel",hidden:a!==r,id:"simple-tabpanel-".concat(r),"aria-labelledby":"simple-tab-".concat(r),...n,children:a===r&&(0,f.jsx)(o.Z,{sx:{p:3},children:s})})}function M(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function W(){const[e,s]=r.useState(0);return(0,f.jsxs)(o.Z,{sx:{width:"100%"},style:{marginTop:"2%"},children:[(0,f.jsx)(o.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,f.jsxs)(n.Z,{value:e,onChange:(e,a)=>{s(a)},"aria-label":"basic tabs example",textColor:"secondary",indicatorColor:"secondary",children:[(0,f.jsx)(t.Z,{label:"Profile",...M(0),textColor:"secondary"}),(0,f.jsx)(t.Z,{label:"Change Password",...M(1),textColor:"secondary"})]})}),(0,f.jsx)(E,{value:e,index:0,children:(0,f.jsx)(P,{})}),(0,f.jsx)(E,{value:e,index:1,children:(0,f.jsx)(F,{})})]})}},10237:(e,s,a)=>{var r=a(64836);s.Z=void 0;var n=r(a(45045)),t=a(46417),o=(0,n.default)((0,t.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");s.Z=o},22611:(e,s,a)=>{var r=a(64836);s.Z=void 0;var n=r(a(45045)),t=a(46417),o=(0,n.default)((0,t.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");s.Z=o}}]);