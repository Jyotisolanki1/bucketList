"use strict";(self.webpackChunkbucketlist=self.webpackChunkbucketlist||[]).push([[7425],{89535:(e,a,n)=>{n.d(a,{Z:()=>i});var s=n(19860),t=n(48119),r=n(46417);const i=e=>{let{color:a,outline:n,size:i,sx:o,...l}=e;const d=(0,s.Z)(),c=a&&!n&&{color:d.palette.background.paper,bgcolor:"".concat(a,".main")},h=n&&{color:a?"".concat(a,".main"):"primary.main",bgcolor:d.palette.background.paper,border:"2px solid",borderColor:a?"".concat(a,".main"):"primary.main"};let m={};switch(i){case"badge":m={width:d.spacing(3.5),height:d.spacing(3.5)};break;case"xs":m={width:d.spacing(4.25),height:d.spacing(4.25)};break;case"sm":m={width:d.spacing(5),height:d.spacing(5)};break;case"lg":m={width:d.spacing(9),height:d.spacing(9)};break;case"xl":m={width:d.spacing(10.25),height:d.spacing(10.25)};break;case"md":m={width:d.spacing(7.5),height:d.spacing(7.5)};break;default:m={}}return(0,r.jsx)(t.Z,{sx:{...c,...h,...m,...o},...l})}},87425:(e,a,n)=>{n.r(a),n.d(a,{default:()=>O});var s=n(47313),t=n(82294),r=n(65280),i=n(9506),o=n(9019),l=n(61113),d=n(35898),c=n(24193),h=n(24631),m=n(85281),u=n(89535),p=n(33497),g=n(67393),x=n(79429),w=n(3463),v=n(66135),Z=n(40364),j=n(5866),f=n(84488),b=n(46417);const P=()=>{const e=(0,v.I0)(),a=(0,s.useRef)(null),[n,t]=(0,s.useState)(!1),[r,i]=(0,s.useState)(null),[P,y]=s.useState(""),[C,S]=s.useState({}),{profile:k,loading:z}=(0,v.v9)((e=>e.admin));(0,s.useEffect)((()=>{(async()=>{const a=await e((0,Z.R5)());S(a.data)})()}),[]);const R=w.Ry().shape({username:w.Z_().required("Username is required").test("no-multi-spaces",(0,b.jsx)(g.Z,{id:"Multiple consecutive spaces are not allowed, and spaces are not permitted at the beginning."}),(e=>e&&/^[^\s]+(\s[^\s]+)*$/.test(e))).min(2,"Username must be at least 2 characters").max(50,"Username must be at most 50 characters"),email:w.Z_().email("Invalid email address").required("Email is required").max(254,"Email must be at most 254 characters")}),I={username:(null===C||void 0===C?void 0:C.username)||"",email:(null===C||void 0===C?void 0:C.email)||"",image:null},B=(0,x.TA)({enableReinitialize:!0,initialValues:I,onSubmit:async(a,n)=>{let{resetForm:s}=n;if(""!==P.trim())y("Please select a valid image file (PNG, JPEG)");else{t(!0);try{const n=new FormData;n.append("username",a.username),n.append("email",a.email),a.image&&n.append("image",a.image),n.append("id",null===C||void 0===C?void 0:C._id);const s=await e((0,Z.iG)(n));var r,i;if(!0===(null===s||void 0===s?void 0:s.success))t(!1),localStorage.setItem("name",null===s||void 0===s||null===(r=s.data)||void 0===r?void 0:r.username),localStorage.setItem("profile",null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.profile_pic),localStorage.setItem("isLoggedIn",!0),e((0,j.ss)({open:!0,message:null===s||void 0===s?void 0:s.message,variant:"alert",alert:{color:"success"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}}));else t(!1),e((0,j.ss)({open:!0,message:null===s||void 0===s?void 0:s.message,variant:"alert",alert:{color:"error"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}}))}catch(o){console.log(o),t(!1),e((0,j.ss)({open:!0,message:"Something went wrong. Please try again later.",variant:"alert",alert:{color:"error"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}}))}}},validationSchema:R});return(0,s.useEffect)((()=>{B.setFieldValue("imageInputRef",a.current)}),[a]),(0,b.jsx)(p.Z,{title:(0,b.jsx)(o.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",spacing:2,children:(0,b.jsx)(o.ZP,{item:!0,children:(0,b.jsx)(l.Z,{variant:"h3",children:"Profile"})})}),children:(0,b.jsx)("form",{onSubmit:B.handleSubmit,id:"validation-forms",children:z?(0,b.jsx)(f.Z,{count:2}):(0,b.jsxs)(o.ZP,{container:!0,spacing:2,direction:"column",children:[(0,b.jsx)(o.ZP,{item:!0,xs:12,children:(0,b.jsxs)(o.ZP,{container:!0,spacing:2,alignItems:"center",children:[null!==C&&void 0!==C&&C.profile_pic?(0,b.jsx)(o.ZP,{item:!0,children:(0,b.jsx)(u.Z,{alt:"Admin Pic",src:r||"".concat("http://52.22.241.165:10037","/").concat(null===C||void 0===C?void 0:C.profile_pic),sx:{height:120,width:120,borderRadius:"8px"}})}):(0,b.jsx)(o.ZP,{item:!0,children:(0,b.jsx)(f.Z,{variant:"rectangular",width:60,height:60})}),(0,b.jsx)(o.ZP,{item:!0,sm:!0,zeroMinWidth:!0,children:(0,b.jsxs)(o.ZP,{container:!0,spacing:1,children:[(0,b.jsx)(o.ZP,{item:!0,xs:12,children:(0,b.jsxs)(d.Z,{direction:"row",spacing:2,alignItems:"center",children:[(0,b.jsx)("label",{htmlFor:"contained-button-file",children:(0,b.jsx)(c.Z,{variant:"contained",component:"span",color:"secondary",children:"Upload Profile"})}),(0,b.jsx)("input",{accept:"image/png, image/jpeg",onChange:e=>{const a=e.target.files[0],n=["image/png","image/jpeg"];B.setFieldError("image",""),y(""),a&&(n.includes(a.type)?(y(""),i(URL.createObjectURL(a)),B.setFieldValue("image",a)):y("Please select a valid image file (PNG, JPEG)"))},style:{display:"none"},id:"contained-button-file",type:"file",ref:a})]})}),(0,b.jsx)(o.ZP,{item:!0,xs:12,children:(0,b.jsx)(l.Z,{variant:"caption",style:{color:"red"},children:P})})]})})]})}),(0,b.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:null!==C&&void 0!==C&&C.username?(0,b.jsx)(h.Z,{id:"username",name:"username",label:"User Name",value:B.values.username,onChange:B.handleChange,onBlur:B.handleBlur,error:B.touched.username&&Boolean(B.errors.username),helperText:B.touched.username&&B.errors.username,fullWidth:!0,autoComplete:"given-name",InputLabelProps:{shrink:!0},inputProps:{maxLength:50}}):(0,b.jsx)(f.Z,{})}),(0,b.jsx)(o.ZP,{item:!0,xs:12,sm:6,children:null!==C&&void 0!==C&&C.email?(0,b.jsx)(h.Z,{id:"email",name:"email",label:(0,b.jsx)(g.Z,{id:"Email"}),value:B.values.email,onChange:B.handleChange,onBlur:B.handleBlur,error:B.touched.email&&Boolean(B.errors.email),helperText:B.touched.email&&B.errors.email,fullWidth:!0,autoComplete:"family-name",InputLabelProps:{shrink:!0}}):(0,b.jsx)(f.Z,{})}),(0,b.jsx)(o.ZP,{item:!0,xs:12,children:(0,b.jsx)(d.Z,{direction:"row",justifyContent:"center",children:(0,b.jsx)(c.Z,{disabled:n,variant:"contained",sx:{my:3,ml:1},type:"submit",color:"secondary",children:n?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Z,{color:"success",size:20,sx:{mr:1}}),"loading ..."]}):(0,b.jsx)(g.Z,{id:"Update"})})})})]})})})};var y=n(19860),C=n(1550),S=n(15103),k=n(49914),z=n(41727),R=n(47131),I=n(15480),B=n(10237),F=n(22611),M=n(58467),N=n(12401),_=n(59673);const A=e=>{let{...a}=e;const n=(0,y.Z)(),[t,r]=((0,M.s0)(),s.useState(!1)),[d,h]=s.useState(!1),[u,g]=s.useState(!1),[v,f]=s.useState(!1),P=()=>{r(!t)},A=()=>{h(!d)},q=()=>{g(!u)},L=e=>{e.preventDefault()},O=(0,_.I0)();return(0,b.jsx)(p.Z,{title:(0,b.jsx)(o.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",spacing:N.dv,children:(0,b.jsx)(o.ZP,{item:!0,children:(0,b.jsx)(l.Z,{variant:"h3",children:"Change Password"})})}),children:(0,b.jsx)(o.ZP,{container:!0,spacing:N.dv,children:(0,b.jsx)(o.ZP,{item:!0,xs:12,md:6,sm:6,children:(0,b.jsx)(x.J9,{initialValues:{oldpassword:"",password:"",confirmPassword:"",submit:null},validationSchema:w.Ry().shape({oldpassword:w.Z_().required("Old Password is required"),password:w.Z_().required("New Password is required").test("password-spaces","New Password must contain at least one lowercase letter, one uppercase letter, one number, and one special character",(e=>e&&/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]+$/.test(e))).test("password-not-same-as-old","New Password must not be the same as the old password",((e,a)=>e!==a.parent.oldpassword)).min(8,"New Password must be at least 8 characters").max(25,"New Password must be at most 25 characters"),confirmPassword:w.Z_().required("Confirm Password is required").test("confirmPassword","Password didn't matched",((e,a)=>a.parent.password===e))}),onSubmit:async e=>{f(!0);try{const a={old_password:e.oldpassword,new_password:e.password,confirm_password:e.confirmPassword},n=await O((0,Z.N$)(a));!0===(null===n||void 0===n?void 0:n.success)?(f(!1),O((0,j.ss)({open:!0,message:null===n||void 0===n?void 0:n.message,variant:"alert",alert:{color:"success"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}}))):(f(!1),O((0,j.ss)({open:!0,message:null===n||void 0===n?void 0:n.message,variant:"alert",alert:{color:"error"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}})))}catch(a){f(!1),O((0,j.ss)({open:!0,message:"Something went wrong. Please try again later.",variant:"alert",alert:{color:"error"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}}))}},children:e=>{let{errors:s,handleBlur:r,handleChange:o,handleSubmit:l,touched:h,values:p}=e;return(0,b.jsxs)("form",{noValidate:!0,onSubmit:l,...a,children:[(0,b.jsxs)(C.Z,{fullWidth:!0,error:Boolean(h.oldpassword&&s.oldpassword),sx:{...n.typography.customInput},children:[(0,b.jsx)(S.Z,{htmlFor:"outlined-adornment-password-reset",children:"Old Password"}),(0,b.jsx)(k.Z,{id:"outlined-adornment-password-reset",type:t?"text":"password",value:p.oldpassword,name:"oldpassword",onBlur:r,onChange:o,endAdornment:(0,b.jsx)(z.Z,{position:"end",children:(0,b.jsx)(R.Z,{"aria-label":"toggle password visibility",onClick:P,onMouseDown:L,edge:"end",size:"large",children:t?(0,b.jsx)(B.Z,{}):(0,b.jsx)(F.Z,{})})}),inputProps:{maxLength:25}})]}),h.oldpassword&&s.oldpassword&&(0,b.jsx)(C.Z,{fullWidth:!0,children:(0,b.jsxs)(I.Z,{error:!0,id:"standard-weight-helper-text-confirm-password",children:[" ",s.oldpassword," "]})}),(0,b.jsxs)(C.Z,{fullWidth:!0,error:Boolean(h.password&&s.password),sx:{...n.typography.customInput},children:[(0,b.jsx)(S.Z,{htmlFor:"outlined-adornment-password-reset",children:"New Password"}),(0,b.jsx)(k.Z,{id:"outlined-adornment-password-reset",type:d?"text":"password",value:p.password,name:"password",onBlur:r,onChange:o,endAdornment:(0,b.jsx)(z.Z,{position:"end",children:(0,b.jsx)(R.Z,{"aria-label":"toggle password visibility",onClick:A,onMouseDown:L,edge:"end",size:"large",children:d?(0,b.jsx)(B.Z,{}):(0,b.jsx)(F.Z,{})})}),inputProps:{maxLength:25}})]}),h.password&&s.password&&(0,b.jsx)(C.Z,{fullWidth:!0,children:(0,b.jsx)(I.Z,{error:!0,id:"standard-weight-helper-text-reset",children:s.password})}),(0,b.jsxs)(C.Z,{fullWidth:!0,error:Boolean(h.confirmPassword&&s.confirmPassword),sx:{...n.typography.customInput},children:[(0,b.jsx)(S.Z,{htmlFor:"outlined-adornment-password-reset",children:"Confirm Password"}),(0,b.jsx)(k.Z,{id:"outlined-adornment-password-reset",type:u?"text":"password",value:p.confirmPassword,name:"confirmPassword",onBlur:r,onChange:o,endAdornment:(0,b.jsx)(z.Z,{position:"end",children:(0,b.jsx)(R.Z,{"aria-label":"toggle password visibility",onClick:q,onMouseDown:L,edge:"end",size:"large",children:u?(0,b.jsx)(B.Z,{}):(0,b.jsx)(F.Z,{})})}),inputProps:{maxLength:25}})]}),h.confirmPassword&&s.confirmPassword&&(0,b.jsx)(C.Z,{fullWidth:!0,children:(0,b.jsxs)(I.Z,{error:!0,id:"standard-weight-helper-text-confirm-password",children:[" ",s.confirmPassword," "]})}),(0,b.jsx)(i.Z,{sx:{mt:2,textAlign:"center",display:"flex",justifyContent:"center"},children:(0,b.jsx)(c.Z,{variant:"contained",sx:{my:3,ml:1},type:"submit",disabled:v,color:"secondary",children:v?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(m.Z,{color:"success"}),"\xa0 Loading ..."]}):"Change Password"})})]})}})})})})};function q(e){const{children:a,value:n,index:s,...t}=e;return(0,b.jsx)("div",{role:"tabpanel",hidden:n!==s,id:"simple-tabpanel-".concat(s),"aria-labelledby":"simple-tab-".concat(s),...t,children:n===s&&(0,b.jsx)(i.Z,{sx:{p:3},children:a})})}function L(e){return{id:"simple-tab-".concat(e),"aria-controls":"simple-tabpanel-".concat(e)}}function O(){const[e,a]=s.useState(0);return(0,b.jsxs)(i.Z,{sx:{width:"100%"},style:{marginTop:"2%"},children:[(0,b.jsx)(i.Z,{sx:{borderBottom:1,borderColor:"divider"},children:(0,b.jsxs)(t.Z,{value:e,onChange:(e,n)=>{a(n)},"aria-label":"basic tabs example",textColor:"secondary",indicatorColor:"secondary",children:[(0,b.jsx)(r.Z,{label:"Profile",...L(0),textColor:"secondary"}),(0,b.jsx)(r.Z,{label:"Change Password",...L(1),textColor:"secondary"})]})}),(0,b.jsx)(q,{value:e,index:0,children:(0,b.jsx)(P,{})}),(0,b.jsx)(q,{value:e,index:1,children:(0,b.jsx)(A,{})})]})}},10237:(e,a,n)=>{var s=n(64836);a.Z=void 0;var t=s(n(45045)),r=n(46417),i=(0,t.default)((0,r.jsx)("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility");a.Z=i},22611:(e,a,n)=>{var s=n(64836);a.Z=void 0;var t=s(n(45045)),r=n(46417),i=(0,t.default)((0,r.jsx)("path",{d:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78 3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z"}),"VisibilityOff");a.Z=i},84488:(e,a,n)=>{n.d(a,{Z:()=>B});var s=n(30168),t=n(63366),r=n(87462),i=n(47313),o=n(83061),l=n(30686),d=n(21921);function c(e){return String(e).match(/[\d.\-+]*\s*(.*)/)[1]||""}function h(e){return parseFloat(e)}var m=n(17551),u=n(17592),p=n(77342),g=n(77430),x=n(32298);function w(e){return(0,x.Z)("MuiSkeleton",e)}(0,g.Z)("MuiSkeleton",["root","text","rectangular","rounded","circular","pulse","wave","withChildren","fitContent","heightAuto"]);var v,Z,j,f,b=n(46417);const P=["animation","className","component","height","style","variant","width"];let y,C,S,k;const z=(0,l.F4)(y||(y=v||(v=(0,s.Z)(["\n  0% {\n    opacity: 1;\n  }\n\n  50% {\n    opacity: 0.4;\n  }\n\n  100% {\n    opacity: 1;\n  }\n"])))),R=(0,l.F4)(C||(C=Z||(Z=(0,s.Z)(["\n  0% {\n    transform: translateX(-100%);\n  }\n\n  50% {\n    /* +0.5s of delay between each loop */\n    transform: translateX(100%);\n  }\n\n  100% {\n    transform: translateX(100%);\n  }\n"])))),I=(0,u.ZP)("span",{name:"MuiSkeleton",slot:"Root",overridesResolver:(e,a)=>{const{ownerState:n}=e;return[a.root,a[n.variant],!1!==n.animation&&a[n.animation],n.hasChildren&&a.withChildren,n.hasChildren&&!n.width&&a.fitContent,n.hasChildren&&!n.height&&a.heightAuto]}})((e=>{let{theme:a,ownerState:n}=e;const s=c(a.shape.borderRadius)||"px",t=h(a.shape.borderRadius);return(0,r.Z)({display:"block",backgroundColor:a.vars?a.vars.palette.Skeleton.bg:(0,m.Fq)(a.palette.text.primary,"light"===a.palette.mode?.11:.13),height:"1.2em"},"text"===n.variant&&{marginTop:0,marginBottom:0,height:"auto",transformOrigin:"0 55%",transform:"scale(1, 0.60)",borderRadius:"".concat(t).concat(s,"/").concat(Math.round(t/.6*10)/10).concat(s),"&:empty:before":{content:'"\\00a0"'}},"circular"===n.variant&&{borderRadius:"50%"},"rounded"===n.variant&&{borderRadius:(a.vars||a).shape.borderRadius},n.hasChildren&&{"& > *":{visibility:"hidden"}},n.hasChildren&&!n.width&&{maxWidth:"fit-content"},n.hasChildren&&!n.height&&{height:"auto"})}),(e=>{let{ownerState:a}=e;return"pulse"===a.animation&&(0,l.iv)(S||(S=j||(j=(0,s.Z)(["\n      animation: "," 1.5s ease-in-out 0.5s infinite;\n    "]))),z)}),(e=>{let{ownerState:a,theme:n}=e;return"wave"===a.animation&&(0,l.iv)(k||(k=f||(f=(0,s.Z)(["\n      position: relative;\n      overflow: hidden;\n\n      /* Fix bug in Safari https://bugs.webkit.org/show_bug.cgi?id=68196 */\n      -webkit-mask-image: -webkit-radial-gradient(white, black);\n\n      &::after {\n        animation: "," 1.6s linear 0.5s infinite;\n        background: linear-gradient(\n          90deg,\n          transparent,\n          ",",\n          transparent\n        );\n        content: '';\n        position: absolute;\n        transform: translateX(-100%); /* Avoid flash during server-side hydration */\n        bottom: 0;\n        left: 0;\n        right: 0;\n        top: 0;\n      }\n    "]))),R,(n.vars||n).palette.action.hover)})),B=i.forwardRef((function(e,a){const n=(0,p.Z)({props:e,name:"MuiSkeleton"}),{animation:s="pulse",className:i,component:l="span",height:c,style:h,variant:m="text",width:u}=n,g=(0,t.Z)(n,P),x=(0,r.Z)({},n,{animation:s,component:l,variant:m,hasChildren:Boolean(g.children)}),v=(e=>{const{classes:a,variant:n,animation:s,hasChildren:t,width:r,height:i}=e,o={root:["root",n,s,t&&"withChildren",t&&!r&&"fitContent",t&&!i&&"heightAuto"]};return(0,d.Z)(o,w,a)})(x);return(0,b.jsx)(I,(0,r.Z)({as:l,ref:a,className:(0,o.Z)(v.root,i),ownerState:x},g,{style:(0,r.Z)({width:u,height:c},h)}))}))}}]);