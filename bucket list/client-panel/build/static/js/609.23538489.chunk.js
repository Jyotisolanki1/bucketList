"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[609],{28609:(e,s,t)=>{t.r(s),t.d(s,{default:()=>T});var i=t(47313),n=t(9019),r=t(61113),l=t(49914),o=t(41727),a=t(51629),d=t(66835),c=t(23477),u=t(24076),h=t(67478),x=t(57861),j=t(74312),v=t(33497),Z=t(12401),g=t(61045),p=t(33037),m=t(50301),S=t(66149),b=t(33604),y=t(47131),f=t(96467),C=t(9506),P=t(1550),q=t(15103),k=t(88797),w=t(51405),R=t(15480),I=t(35898),A=t(24193),F=t(85281),O=t(79429),_=(t(3463),t(5866)),z=t(11198),B=t(46417);const D=i.forwardRef(((e,s)=>(0,B.jsx)(m.Z,{direction:"down",ref:s,...e}))),W=e=>{let{open:s,close:t,data:r}=e;const[l,o]=(0,i.useState)(!1),a=((0,i.useRef)(null),(0,g.I0)()),[d,c]=(0,i.useState)(!1),[u]=(0,i.useState)(""),[h,x]=(0,i.useState)(!1),j={status:null===r||void 0===r?void 0:r.requestStatus,id:null===r||void 0===r?void 0:r.idRequest},v=(0,O.TA)({initialValues:j,onSubmit:async(e,s)=>{let{resetForm:i}=s;x(!0);try{const s=await a((0,p.m5)(e));!0===(null===s||void 0===s?void 0:s.success)?(x(!1),i(),a((0,_.ss)({open:!0,message:s.message,variant:"alert",alert:{color:"success"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}})),t(!1)):(x(!1),a((0,_.ss)({open:!0,message:null===s||void 0===s?void 0:s.message,variant:"alert",alert:{color:"error"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}})))}catch(n){console.log(n),x(!1),a((0,_.ss)({open:!0,message:"Something went wrong. Please try again letar.",variant:"alert",alert:{color:"error"},close:!1,anchorOrigin:{vertical:"top",horizontal:"right"}}))}},validateOnChange:!0,validateOnBlur:!0});return(0,B.jsx)(S.Z,{open:s,TransitionComponent:D,keepMounted:!0,fullWidth:"true",maxWidth:"md","aria-describedby":"alert-dialog-slide-description",children:(0,B.jsxs)("form",{onSubmit:v.handleSubmit,id:"validation-forms",children:[(0,B.jsx)(b.Z,{children:(0,B.jsxs)(n.ZP,{container:!0,spacing:3,children:[(0,B.jsx)(n.ZP,{item:!0,xs:6,children:"Change Request Status"}),(0,B.jsx)(n.ZP,{item:!0,xs:6,children:(0,B.jsx)(y.Z,{color:"inherit",onClick:()=>{t(!1)},"aria-label":"close",sx:{position:"absolute",right:8,top:8},children:(0,B.jsx)(z.Z,{})})})]})}),(0,B.jsxs)(f.Z,{children:[(0,B.jsx)(n.ZP,{container:!0,spacing:2,sx:{padding:2},children:(0,B.jsx)(n.ZP,{item:!0,xs:12,md:12,children:(0,B.jsx)(C.Z,{sx:{padding:2,backgroundColor:"white",borderRadius:1,boxShadow:"0 0 10px rgba(0,0,0,0.1)"},children:(0,B.jsx)("form",{onSubmit:v.handleSubmit,children:(0,B.jsx)(n.ZP,{container:!0,spacing:2,children:(0,B.jsx)(n.ZP,{item:!0,xs:12,children:(0,B.jsxs)(P.Z,{fullWidth:!0,children:[(0,B.jsx)(q.Z,{id:"category-label",children:"Status"}),(0,B.jsxs)(k.Z,{id:"demo-simple-select",label:"Category",name:"category",value:v.values.status||"select",onChange:e=>{const{value:s}=e.target;v.setFieldValue("status",s)},sx:{width:"100%"},children:[(0,B.jsx)(w.Z,{value:"Approved",disabled:!0,children:"Approved"}),(0,B.jsx)(w.Z,{value:"In Process",children:"In Process"}),(0,B.jsx)(w.Z,{value:"Completed",children:"Completed"})]}),v.touched.category&&v.errors.category&&(0,B.jsx)(R.Z,{error:!0,children:v.errors.category})]})})})})})})}),(0,B.jsx)(n.ZP,{item:!0,xs:12,children:(0,B.jsx)(I.Z,{direction:"row",justifyContent:"center",children:(0,B.jsx)(A.Z,{disabled:h,variant:"contained",sx:{my:3,ml:1},type:"submit",children:h?(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(F.Z,{color:"primary"}),"\xa0Loading ..."]}):"Update"})})})]})]})})};var Y=t(45085),M=t(70816),N=t.n(M);const T=()=>{const e=(0,g.I0)(),[s,t]=i.useState(!1),[m,S]=i.useState(!1),[b,y]=i.useState(),[f,C]=i.useState(!0),[P,q]=i.useState(),[k,w]=i.useState(1),[R,I]=i.useState(10),[A,F]=i.useState(""),{requests:O,loading:_,totalPages:z}=(0,g.v9)((e=>e.request));i.useEffect((()=>{e((0,p.A_)(A,k,R))}),[A,k,R,e,f,m,s]);return(0,B.jsx)(B.Fragment,{children:(0,B.jsxs)(v.Z,{title:(0,B.jsxs)(n.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",spacing:Z.dv,style:{marginTop:"0%"},children:[(0,B.jsx)(n.ZP,{item:!0,children:(0,B.jsx)(r.Z,{variant:"h3",children:"Requests List"})}),(0,B.jsx)(n.ZP,{item:!0,children:(0,B.jsx)(l.Z,{id:"input-search-list-style1",placeholder:"Search By Request Id",startAdornment:(0,B.jsx)(o.Z,{position:"start"}),size:"large",onChange:e=>{F(e.target.value)}})})]}),content:!1,children:[(0,B.jsx)(a.Z,{children:(0,B.jsxs)(d.Z,{children:[(0,B.jsx)(c.Z,{children:(0,B.jsxs)(u.Z,{children:[(0,B.jsx)(h.Z,{sx:{pl:3},children:"S.no."}),(0,B.jsx)(h.Z,{children:"Request ID"}),(0,B.jsx)(h.Z,{children:"Bucket Name"}),(0,B.jsx)(h.Z,{children:"Bucket Category"}),(0,B.jsx)(h.Z,{children:"Requested Date"}),(0,B.jsx)(h.Z,{children:"Status"})]})}),(0,B.jsxs)(x.Z,{children:[_&&(0,B.jsx)(Y.Z,{count:6}),!_&&(null===O||void 0===O?void 0:O.length)>0&&O.map(((e,s)=>{var t,i;return(0,B.jsxs)(u.Z,{hover:!0,children:[(0,B.jsx)(h.Z,{sx:{pl:3},children:s+1+(k*R-R)}),(0,B.jsx)(h.Z,{children:null===e||void 0===e?void 0:e.request_id}),(0,B.jsx)(h.Z,{children:null===e||void 0===e?void 0:e.bucketInfo.name}),(0,B.jsx)(h.Z,{children:null===e||void 0===e||null===(t=e.bucketInfo)||void 0===t||null===(i=t.category)||void 0===i?void 0:i.name}),(0,B.jsx)(h.Z,{children:null!==e&&void 0!==e&&e.requested_date?N()(null===e||void 0===e?void 0:e.requested_date).format("MM-DD-YYYY"):"N/A"}),(0,B.jsx)(h.Z,{style:{color:"Approved"===(null===e||void 0===e?void 0:e.isStatus)?"blue":"In Process"===(null===e||void 0===e?void 0:e.isStatus)?"red":"Completed"===(null===e||void 0===e?void 0:e.isStatus)?"green":"black",fontWeight:"bold",cursor:"pointer"},onClick:()=>(e=>{y(e._id),q(null===e||void 0===e?void 0:e.isStatus),S(!0)})(e),children:null===e||void 0===e?void 0:e.isStatus})]},s)})),!_&&!((null===O||void 0===O?void 0:O.length)>0)&&(0,B.jsx)(u.Z,{children:(0,B.jsx)(h.Z,{colSpan:6,children:"Request Not Found"})})]})]})}),(0,B.jsx)(n.ZP,{item:!0,xs:12,sx:{p:3},children:(0,B.jsx)(n.ZP,{container:!0,justifyContent:"space-between",spacing:Z.dv,children:(0,B.jsx)(n.ZP,{item:!0,children:(0,B.jsx)(j.Z,{count:z,page:k,color:"primary",onChange:(e,s)=>{w(s)}})})})}),m&&(0,B.jsx)(W,{open:m,close:e=>(e=>{S(!1),!0===e&&C(!f)})(e),data:{idRequest:b,requestStatus:P}})]})})}}}]);