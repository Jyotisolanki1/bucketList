"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[658],{66658:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ee});var i=n(75192),s=n.n(i),o=n(47313),a=n(11198),l=n(19860),r=n(47131),c=n(93405),d=n(19536),h=n(9019),x=n(61113),u=n(24193),j=n(38390),p=n(33497),m=n(9289),f=n(23477),Z=n(24076),g=n(67478),b=n(44758),y=n(49914),v=n(41727),S=n(51629),C=n(66835),w=n(57861),P=n(48119),k=n(35272),M=n(91034),R=n(84060),z=n(45085),I=n(1834),N=n(61045),T=n(31059),U=n(55832),W=n(24631),A=n(35898),_=n(66182),V=n(5866),q=n(12401),E=n(79429),O=n(3463),B=n(46417);const D=O.Ry({notification:O.Z_().min(3,"Notification should be of minimum 3 characters length").required("Notification is required")}),F=e=>{let{notificationId:t,notificationText:n,handleModalClose:i}=e;const s=(0,N.I0)(),o=(0,E.TA)({initialValues:{notification:n},validationSchema:D,onSubmit:async e=>{const n={notification_id:t,notification:e.notification},o=await s((0,T.Vv)(n));i(),await s((0,T.Ae)()),!0===o.succeeded?await s((0,V.ss)({open:!0,message:o.ResponseMessage,variant:"alert",alert:{color:"success"},close:!1})):await s((0,V.ss)({open:!0,message:o.ResponseMessage,variant:"alert",alert:{color:"danger"},close:!1}))}});return(0,B.jsx)("form",{onSubmit:o.handleSubmit,children:(0,B.jsxs)(h.ZP,{container:!0,spacing:q.dv,children:[(0,B.jsx)(h.ZP,{item:!0,xs:12,children:(0,B.jsx)(W.Z,{fullWidth:!0,id:"notification",name:"notification",label:"Notification Title",value:o.values.notification,onChange:o.handleChange,error:o.touched.notification&&Boolean(o.errors.notification),helperText:o.touched.notification&&o.errors.notification})}),(0,B.jsx)(h.ZP,{item:!0,xs:12,children:(0,B.jsx)(A.Z,{direction:"row",justifyContent:"center",children:(0,B.jsx)(_.Z,{children:(0,B.jsx)(u.Z,{variant:"contained",color:"secondary",type:"submit",children:"Update"})})})})]})})};function L(){return Math.round(20*Math.random())-10}function Y(){const e=50+L(),t=50+L();return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(-".concat(e,"%, -").concat(t,"%)")}}const G=e=>{let{numSelected:t}=e;return(0,B.jsx)(m.Z,{sx:{p:0,pl:1,pr:1,...t>0&&{color:e=>e.palette.secondary.main}},children:t>0&&(0,B.jsxs)(x.Z,{color:"inherit",variant:"h4",component:"div",children:[t," Users Selected"]})})};const H=e=>{let{handleSelectedUsers:t,closeopen:n}=e;const i=(0,N.I0)(),[s,l]=o.useState([]),[m,W]=o.useState(0),[A,_]=o.useState(10),[q,E]=o.useState(""),[O,D]=o.useState(null),[L,H]=o.useState(""),{usersList:J,loading:K}=(0,N.v9)((e=>e.user1)),[Q,X]=o.useState([]),[$]=o.useState(Y),[ee,te]=o.useState(!1),[ne,ie]=o.useState(!1);(0,o.useEffect)((()=>{!1===n&&X([])}),[n]);const[se,oe]=o.useState(!1),ae=()=>{te(!1)};o.useEffect((()=>{i((0,U.Zl)(q))}),[q,i,n]);const le=()=>{ie(!1),D("")};function re(e){let{selected:t}=e;return(0,B.jsx)(f.Z,{children:(0,B.jsx)(Z.Z,{children:(0,B.jsx)(g.Z,{padding:"none",colSpan:5,children:(0,B.jsx)(G,{numSelected:t.length})})})})}return o.useEffect((()=>{l(J)}),[J]),(0,B.jsxs)(B.Fragment,{children:[(0,B.jsx)(p.Z,{title:(0,B.jsxs)(h.ZP,{container:!0,justifyContent:"space-between",children:[(0,B.jsxs)(h.ZP,{item:!0,children:[(0,B.jsx)(b.Z,{color:"primary",indeterminate:Q.length>0&&Q.length<s.length,checked:s.length>0&&Q.length===s.length,onChange:e=>{if(e.target.checked){const e=s.map((e=>e._id));return X(e),t(e),!1}return X([]),t([]),!0},style:{marginLeft:"-20px"}}),(0,B.jsx)("span",{children:"Select All"})]}),(0,B.jsx)(h.ZP,{item:!0,children:(0,B.jsx)(y.Z,{id:"input-search-list-style1",placeholder:"Search",startAdornment:(0,B.jsx)(v.Z,{position:"start",children:(0,B.jsx)(I.jVj,{stroke:1.5,size:"16px"})}),size:"small",onChange:e=>{(e.target.value.trim().length>2||0===e.target.value.trim().length)&&E(e.target.value.trim())}})})]}),content:!1,children:(0,B.jsx)(h.ZP,{container:!0,children:K?(0,B.jsxs)(p.Z,{children:[(0,B.jsxs)(w.Z,{children:[(0,B.jsx)(g.Z,{children:(0,B.jsx)(z.Z,{count:1})}),(0,B.jsx)(g.Z,{children:(0,B.jsxs)(h.ZP,{container:!0,spacing:2,alignItems:"center",sx:{flexWrap:"nowrap"},children:[(0,B.jsx)(h.ZP,{item:!0,children:(0,B.jsx)(z.Z,{count:1})}),(0,B.jsx)(h.ZP,{item:!0,xs:!0,zeroMinWidth:!0,children:(0,B.jsx)(z.Z,{count:1})}),(0,B.jsx)(h.ZP,{item:!0,xs:!0,zeroMinWidth:!0,children:(0,B.jsx)(z.Z,{count:1})})]})})]})," "]}):(0,B.jsx)(h.ZP,{item:!0,xs:12,children:s.length?(0,B.jsx)(p.Z,{content:!1,children:(0,B.jsx)(S.Z,{children:(0,B.jsxs)(C.Z,{"aria-labelledby":"tableTitle",sx:{minWidth:320,"& td":{whiteSpace:"nowrap",px:.75}},children:[Q.length>0&&(0,B.jsx)(re,{selected:Q}),(0,B.jsx)(w.Z,{children:s.map((e=>(0,B.jsxs)(Z.Z,{hover:!0,sx:{bgcolor:"","& td:last-of-type>div":{position:"absolute",top:"50%",right:5,transform:"translateY(-50%)",display:"none",boxShadow:"0px 1px 4px rgba(0, 0, 0, 0.1)",borderRadius:"12px",py:1,px:1.75,"& button + button":{ml:.625}},"&:hover":{"& td:last-of-type>div":{display:"block"}}},tabIndex:-1,children:[(0,B.jsx)(g.Z,{children:(0,B.jsx)(b.Z,{color:"primary",checked:-1!==Q.indexOf(e._id),onChange:n=>((e,n)=>{const i=Q.indexOf(n._id);let s=[];-1===i?s=s.concat(Q,n._id):0===i?s=s.concat(Q.slice(1)):i===Q.length-1?s=s.concat(Q.slice(0,-1)):i>0&&(s=s.concat(Q.slice(0,i),Q.slice(i+1))),X(s),t(s)})(0,e)})}),(0,B.jsx)(g.Z,{children:(0,B.jsxs)(h.ZP,{container:!0,spacing:2,alignItems:"center",sx:{flexWrap:"nowrap"},children:[(0,B.jsx)(h.ZP,{item:!0,children:(0,B.jsx)(P.Z,{sx:{width:se?30:40,height:se?30:40},alt:e.firstname,src:"".concat("http://52.22.241.165:10037","/").concat(e.image)})}),(0,B.jsx)(h.ZP,{item:!0,xs:!0,zeroMinWidth:!0,children:(0,B.jsx)(k.Z,{disableRipple:!0,children:(0,B.jsx)(x.Z,{align:"left",variant:e.isRead?"body2":"subtitle1",component:"div",children:e.fullname})})}),(0,B.jsx)(h.ZP,{item:!0,xs:!0,zeroMinWidth:!0,children:(0,B.jsx)(k.Z,{disableRipple:!0,children:(0,B.jsx)(x.Z,{align:"left",variant:e.isRead?"body2":"subtitle1",component:"div",children:e.email})})})]})}),(0,B.jsx)(g.Z,{align:"center"})]},e._id)))})]})})}):(0,B.jsx)(p.Z,{children:(0,B.jsx)(x.Z,{variant:"h4",children:"User Not Found"})})})})}),(0,B.jsx)(M.Z,{rowsPerPageOptions:[10,20,30],component:"div",count:s.length,rowsPerPage:A,page:m,onPageChange:(e,t)=>{W(t)},onRowsPerPageChange:e=>{_(parseInt(null===e||void 0===e?void 0:e.target.value,10)),W(0)}}),(0,B.jsx)(p.Z,{children:(0,B.jsx)(j.Z,{open:ee,onClose:ae,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:(0,B.jsxs)(p.Z,{style:$,sx:{position:"absolute",width:{xs:280,lg:450},top:"50%",left:"50%",transform:"translate(-50%, -50%)"},title:"Update Notification",content:!1,secondary:(0,B.jsx)(r.Z,{onClick:ae,size:"large",children:(0,B.jsx)(a.Z,{fontSize:"small"})}),children:[(0,B.jsx)(c.Z,{children:(0,B.jsx)(F,{notificationId:O,notificationText:L,handleModalClose:ae})}),(0,B.jsx)(d.Z,{})]})})}),(0,B.jsx)(j.Z,{open:ne,onClose:le,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:(0,B.jsxs)(p.Z,{style:$,sx:{position:"absolute",width:{xs:280,lg:450},top:"50%",left:"50%",transform:"translate(-50%, -50%)"},title:"Delete Notification",content:!1,secondary:(0,B.jsx)(r.Z,{onClick:le,size:"large",children:(0,B.jsx)(a.Z,{fontSize:"small"})}),children:[(0,B.jsxs)(c.Z,{children:[(0,B.jsxs)(x.Z,{variant:"body1",sx:{fontWeight:"500",marginBottom:2,textAlign:"center"},children:["Are you sure you want to delete this notification?"," "]}),(0,B.jsxs)(R.Z,{disableElevation:!0,variant:"contained","aria-label":"Disabled button group",sx:{display:"flex",justifyContent:"center"},children:[(0,B.jsx)(u.Z,{onClick:()=>{le()},sx:{margin:1},children:"Close"}),(0,B.jsx)(u.Z,{onClick:()=>{le(),(async()=>{const e={notification_id:O};console.log(e);const t=await i((0,T.vo)(e));!0===t.succeeded?await i((0,V.ss)({open:!0,message:t.ResponseMessage,variant:"alert",alert:{color:"success"},close:!1})):await i((0,V.ss)({open:!0,message:t.ResponseMessage,variant:"alert",alert:{color:"danger"},close:!1})),D(""),await i((0,T.Ae)())})()},sx:{margin:1},color:"error",children:"Delete"})]})]}),(0,B.jsx)(d.Z,{})]})})]})},J=O.Ry({notification:O.Z_().min(3,"Notification should be of minimum 3 characters length").required("Notification is required")}),K=e=>{let{handleClose:t,selectedUsers:n}=e;const i=(0,N.I0)(),s=(0,E.TA)({initialValues:{notification:"",userids:n},validationSchema:J,onSubmit:async e=>{const n=await i((0,U.Vp)(e));!0===n.succeeded?await i((0,V.ss)({open:!0,message:n.ResponseMessage,variant:"alert",alert:{color:"success"},close:!1})):await i((0,V.ss)({open:!0,message:n.ResponseMessage,variant:"alert",alert:{color:"error"},close:!1})),t()}});return(0,B.jsx)("form",{onSubmit:s.handleSubmit,children:(0,B.jsxs)(h.ZP,{container:!0,spacing:q.dv,children:[(0,B.jsx)(h.ZP,{item:!0,xs:12,children:(0,B.jsx)(W.Z,{fullWidth:!0,id:"notification",name:"notification",label:"Notification Title",value:s.values.notification,onChange:s.handleChange,error:s.touched.notification&&Boolean(s.errors.notification),helperText:s.touched.notification&&s.errors.notification})}),(0,B.jsx)(h.ZP,{item:!0,xs:12,children:(0,B.jsx)(A.Z,{direction:"row",justifyContent:"center",children:(0,B.jsx)(_.Z,{children:(0,B.jsx)(u.Z,{variant:"contained",color:"secondary",type:"submit",children:"Add"})})})})]})})};function Q(){return Math.round(20*Math.random())-10}function X(){const e=50+Q(),t=50+Q();return{top:"".concat(e,"%"),left:"".concat(t,"%"),transform:"translate(-".concat(e,"%, -").concat(t,"%)")}}const $=o.forwardRef(((e,t)=>{let{modalStyle:n,handleClose:i,selectedUsers:s}=e;return(0,B.jsx)("div",{ref:t,tabIndex:-1,children:(0,B.jsxs)(p.Z,{style:n,sx:{position:"absolute",width:{xs:280,lg:450},top:"50%",left:"50%",transform:"translate(-50%, -50%)"},title:"Send Notification",content:!1,secondary:(0,B.jsx)(r.Z,{onClick:i,size:"large",children:(0,B.jsx)(a.Z,{fontSize:"small"})}),children:[(0,B.jsx)(c.Z,{children:(0,B.jsx)(K,{handleClose:i,selectedUsers:s})}),(0,B.jsx)(d.Z,{})]})})}));$.propTypes={modalStyle:s().object,handleClose:s().func};const ee=()=>{const e=(0,l.Z)(),[t]=o.useState(X),[n,i]=o.useState(!1),[s,a]=(0,o.useState)([]),r=(0,N.I0)(),c=()=>{i(!1)};return(0,B.jsxs)(p.Z,{title:(0,B.jsxs)(h.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",spacing:q.dv,children:[(0,B.jsx)(h.ZP,{item:!0,children:(0,B.jsx)(x.Z,{variant:"h3",children:"Notifications"})}),(0,B.jsx)(h.ZP,{item:!0,children:(0,B.jsx)(h.ZP,{container:!0,spacing:1,sx:{justifyContent:"flex-end",[e.breakpoints.down("lg")]:{justifyContent:"flex-start"}},children:(0,B.jsx)(h.ZP,{item:!0,children:(0,B.jsx)(u.Z,{variant:"contained",onClick:async()=>0===s.length?(console.log("testting"),r((0,V.ss)({open:!0,message:"Please select at least one user",variant:"alert",close:!1,alert:{color:"error"},anchorOrigin:{vertical:"top",horizontal:"right"}})),!1):(i(!0),!0),children:"Send Notification"})})})})]}),content:!1,children:[(0,B.jsx)(H,{handleSelectedUsers:e=>{a(e)},closeopen:n}),(0,B.jsx)(j.Z,{open:n,onClose:c,"aria-labelledby":"simple-modal-title","aria-describedby":"simple-modal-description",children:(0,B.jsx)($,{modalStyle:t,handleClose:c,selectedUsers:s})})]})}}}]);